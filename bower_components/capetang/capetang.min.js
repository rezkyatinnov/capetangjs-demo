/**
 * CapetangJS
 * 
 * A javascript engine for Text to speech using WebSpeech API by rezkyatinnov
 */
(function(){function e(){var e=this
this.VERSION="0.2.0",this.POPULATE_VOICES_TIMEOUT=24e4
var t="en-US",n=1,s=1,i=1,o=null,r=function(e){},c="",u=t,h=n,a=s,p=i,f=null,l="",g=r,y=r,V=r,S=r,v=r,d=r,m=r
this.getText=function(){return c},this.setText=function(e){return c=e,this},this.getLang=function(){return u},this.setLang=function(e){return u=e,this},this.getVolume=function(){return h},this.setVolume=function(e){return h=e,this},this.getRate=function(){return a},this.setRate=function(e){return a=e,this},this.getPitch=function(){return p},this.setPitch=function(e){return p=e,this},this.getVoice=function(){return f},this.setVoice=function(e){if(e instanceof SpeechSynthesisVoice)return f=e,this
throw"capetang.setVoice() error: voice must be an instance of SpeechSynthesisVoice. get available voice list by accessing capetang.getVoices() or capetang.onVoiceReady()"},this.getLastError=function(){return l},this.setLastError=function(e){l=e},this.onError=function(){return g},this.setOnError=function(e){return g=e,this},this.onStart=function(){return y},this.setOnStart=function(e){return y=e,this},this.onEnd=function(){return V},this.setOnEnd=function(e){return V=e,this},this.onPaused=function(){return S},this.setOnPaused=function(e){return S=e,this},this.onResume=function(){return v},this.setOnResume=function(e){return v=e,this},this.onBoundary=function(){return d},this.setOnBoundary=function(e){return d=e,this},this.onMark=function(){return m},this.setOnMark=function(e){return m=e,this},this.initVoice=function(){c="",f=o,u=t,p=i,a=s,h=n,g=r,y=r,V=r,S=r,v=r,d=r,m=r},this.resetDefault=function(){t="en-US",i=1,s=1,n=1,o=null,r=function(e){},e.initVoice()},this.setDefaultLang=function(e){t=e,u=t},this.setDefaultPitch=function(e){i=e,p=e},this.setDefaultRate=function(e){s=e,a=e},this.setDefaultVolume=function(e){n=e,h=e},this.setDefaultVoice=function(e){if(!(e instanceof SpeechSynthesisVoice))throw"capetang.setDefaultVoice() error: voice must be an instance of SpeechSynthesisVoice. get available voice list by accessing capetang.getVoices() or capetang.onVoiceReady()"
o=e,f=e}}var t=this
"speechSynthesis"in t?console.log("Yeay!! Your browser supports speech synthesis."):console.log("Oops! Sorry, It seems your browser doesn't support speech synthesis.")
var n=speechSynthesis.getVoices()
t.speechSynthesis.onvoiceschanged=function(e){n=speechSynthesis.getVoices()},e.prototype.speak=function(e){var n=this,s=new SpeechSynthesisUtterance
s.text=null==e||void 0==e?n.getText():e,s.lang=n.getLang(),s.volume=parseFloat(n.getVolume()),s.rate=parseFloat(n.getRate()),s.pitch=parseFloat(n.getPitch()),s.onerror=n.onError(),s.onstart=n.onStart(),s.onend=n.onEnd(),s.onboundary=n.onBoundary(),s.onmark=n.onMark(),s.onpause=n.onPaused(),s.onresume=n.onResume()
var i=n.getVoice()
null!=i&&(s.voice=i),t.speechSynthesis.speak(s),n.initVoice()},e.prototype.onVoicesReady=function(e){var s=this,i=0,o=t.setInterval(function(){null!=n&&0!=n.length?(e(t.speechSynthesis.getVoices()),t.clearInterval(o)):i>=s.POPULATE_VOICES_TIMEOUT&&(e(n),t.clearInterval(o)),i+=1e3},1e3)},e.prototype.setVoiceByName=function(e){var n=this,s=t.speechSynthesis.getVoices().filter(function(t){return t.name==e})
return null!=s&&s.length>0&&n.setVoice(s[0]),this},e.prototype.getVoicesByName=function(e){var n=t.speechSynthesis.getVoices().filter(function(t){return t.name==e})
return null!=n&&n.length>0?n:[]},e.prototype.getVoicesByLang=function(e){var n=t.speechSynthesis.getVoices().filter(function(t){return t.lang==e})
return null!=n&&n.length>0?n:[]},e.prototype.getAvaliableLang=function(e){var n=t.speechSynthesis.getVoices().map(function(e){return e.lang})
return null!=n&&n.length>0?n:[]},e.prototype.getVoices=function(){return t.speechSynthesis.getVoices()},e.prototype.setOnVoicesListChangedListener=function(e){t.speechSynthesis.onvoiceschanged=e},e.prototype.cancel=function(){t.speechSynthesis.cancel()},e.prototype.pause=function(){t.speechSynthesis.pause()},e.prototype.resume=function(){t.speechSynthesis.resume()},e.prototype.isSpeaking=function(){return t.speechSynthesis.speaking},e.prototype.hasPending=function(){return t.speechSynthesis.pending},e.prototype.isPaused=function(){return t.speechSynthesis.paused},t.capetang=new e}).call(this)
