/**
 * CapetangJS
 * 
 * A javascript engine for Text to speech using WebSpeech API by rezkyatinnov
 */
(function(){function t(){var t=this
this.VERSION="0.2.2",this.POPULATE_VOICES_TIMEOUT=24e4
var e="en-US",n=1,s=1,i=1,o=null,r=function(t){},c="",u=e,h=n,a=s,p=i,f=null,l="",g=r,y=r,V=r,S=r,v=r,d=r,m=r
this.getText=function(){return c},this.setText=function(t){return c=t,this},this.getLang=function(){return u},this.setLang=function(t){return u=t,this},this.getVolume=function(){return h},this.setVolume=function(t){return h=t,this},this.getRate=function(){return a},this.setRate=function(t){return a=t,this},this.getPitch=function(){return p},this.setPitch=function(t){return p=t,this},this.getVoice=function(){return f},this.setVoice=function(t){if("SpeechSynthesisVoice"==t.__proto__.constructor.name)return f=t,this
throw"capetang.setVoice() error: voice must be an instance of SpeechSynthesisVoice. get available voice list by accessing capetang.getVoices() or capetang.onVoiceReady()"},this.getLastError=function(){return l},this.setLastError=function(t){l=t},this.onError=function(){return g},this.setOnError=function(t){return g=t,this},this.onStart=function(){return y},this.setOnStart=function(t){return y=t,this},this.onEnd=function(){return V},this.setOnEnd=function(t){return V=t,this},this.onPaused=function(){return S},this.setOnPaused=function(t){return S=t,this},this.onResume=function(){return v},this.setOnResume=function(t){return v=t,this},this.onBoundary=function(){return d},this.setOnBoundary=function(t){return d=t,this},this.onMark=function(){return m},this.setOnMark=function(t){return m=t,this},this.initVoice=function(){c="",f=o,u=e,p=i,a=s,h=n,g=r,y=r,V=r,S=r,v=r,d=r,m=r},this.resetDefault=function(){e="en-US",i=1,s=1,n=1,o=null,r=function(t){},t.initVoice()},this.setDefaultLang=function(t){e=t,u=e},this.setDefaultPitch=function(t){i=t,p=t},this.setDefaultRate=function(t){s=t,a=t},this.setDefaultVolume=function(t){n=t,h=t},this.setDefaultVoice=function(t){if("SpeechSynthesisVoice"!=t.__proto__.constructor.name)throw"capetang.setDefaultVoice() error: voice must be an instance of SpeechSynthesisVoice. get available voice list by accessing capetang.getVoices() or capetang.onVoiceReady()"
o=t,f=t}}var e=this
"speechSynthesis"in e?console.log("Yeay!! Your browser supports speech synthesis."):console.log("Oops! Sorry, It seems your browser doesn't support speech synthesis.")
var n=speechSynthesis.getVoices()
e.speechSynthesis.onvoiceschanged=function(t){n=speechSynthesis.getVoices()},t.prototype.speak=function(t){var n=this,s=new SpeechSynthesisUtterance
s.text=null==t||void 0==t?n.getText():t,s.lang=n.getLang(),s.volume=parseFloat(n.getVolume()),s.rate=parseFloat(n.getRate()),s.pitch=parseFloat(n.getPitch()),s.onerror=n.onError(),s.onstart=n.onStart(),s.onend=n.onEnd(),s.onboundary=n.onBoundary(),s.onmark=n.onMark(),s.onpause=n.onPaused(),s.onresume=n.onResume()
var i=n.getVoice()
null!=i&&(s.voice=i),e.speechSynthesis.speak(s),n.initVoice()},t.prototype.onVoicesReady=function(t){var s=this,i=0,o=e.setInterval(function(){null!=n&&0!=n.length?(t(e.speechSynthesis.getVoices()),e.clearInterval(o)):i>=s.POPULATE_VOICES_TIMEOUT&&(t(n),e.clearInterval(o)),i+=1e3},1e3)},t.prototype.setVoiceByName=function(t){var n=this,s=e.speechSynthesis.getVoices().filter(function(e){return e.name==t})
return null!=s&&s.length>0&&n.setVoice(s[0]),this},t.prototype.getVoicesByName=function(t){var n=e.speechSynthesis.getVoices().filter(function(e){return e.name==t})
return null!=n&&n.length>0?n:[]},t.prototype.getVoicesByLang=function(t){var n=e.speechSynthesis.getVoices().filter(function(e){return e.lang==t})
return null!=n&&n.length>0?n:[]},t.prototype.getAvaliableLang=function(t){var n=e.speechSynthesis.getVoices().map(function(t){return t.lang})
return null!=n&&n.length>0?n:[]},t.prototype.getVoices=function(){return e.speechSynthesis.getVoices()},t.prototype.setOnVoicesListChangedListener=function(t){e.speechSynthesis.onvoiceschanged=t},t.prototype.cancel=function(){e.speechSynthesis.cancel()},t.prototype.pause=function(){e.speechSynthesis.pause()},t.prototype.resume=function(){e.speechSynthesis.resume()},t.prototype.isSpeaking=function(){return e.speechSynthesis.speaking},t.prototype.hasPending=function(){return e.speechSynthesis.pending},t.prototype.isPaused=function(){return e.speechSynthesis.paused},e.capetang=new t}).call(this)
